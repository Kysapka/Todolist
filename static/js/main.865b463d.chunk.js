(this.webpackJsonptodolist2=this.webpackJsonptodolist2||[]).push([[0],{165:function(t,e,n){},171:function(t,e,n){},198:function(t,e,n){"use strict";n.r(e);var i,a,c=n(0),o=n.n(c),r=n(22),s=n.n(r),l=(n(165),n(21)),d=n(78),u=(n(171),n(282)),j=n(285),b=n(283),f=n(280),O=n(276),h=n(284),m=n(278),p=n(137),g=n.n(p),x=n(300),v=n(18),I=n(14),y=n(288),S=n(291),D=n(124),E={withCredentials:!0,headers:{"API-KEY":"9660a6e9-744c-4376-8717-32b82016bc28"}},T=n.n(D).a.create(Object(I.a)({baseURL:"https://social-network.samuraijs.com/api/1.1/"},E)),C=function(){return T.get("todo-lists",E)},k=function(t){return T.post("todo-lists",{title:t})},w=function(t,e){return T.put("todo-lists/".concat(e),{title:t})},A=function(t){return T.delete("todo-lists/".concat(t))},L=function(t){return T.get("todo-lists/".concat(t,"/tasks"))},_=function(t,e){return T.post("todo-lists/".concat(e,"/tasks"),{title:t})},P=function(t,e,n){return T.put("todo-lists/".concat(t,"/tasks/").concat(e),n)},N=function(t,e){return T.delete("todo-lists/".concat(t,"/tasks/").concat(e))},R=function(t){return T.post("/auth/login",t)},z=function(){return T.delete("/auth/login")},B=function(){return T.get("/auth/me")};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(i||(i={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(a||(a={}));var G=function(t,e){t.data.messages?e(Ot(t.data.messages[0])):e(Ot("Some error occurred")),e(ft("failed"))},M=function(t,e){e(Ot(t.message)),e(ft("failed"))},U=n(19),F="ADD-TODOLIST",H="REMOVE_TODOLIST",K="CHANGE_TDL_NAME",W="CHANGE_FILTER",Z="SET_TODOLISTS",q="CHANGE_TODOLIST_ENTITY_STATUS",V="CLEAR_DATA",Y="ADD_TASK",J="REMOVE_TASK",$="SET_TASKS",Q="UPDATE_TASK",X="CHANGE_TASK_ENTITY_STATUS",tt=n(6),et=function(t,e,n){return{type:X,todolistID:t,taskID:e,entityStatus:n}},nt=function(t){return function(e){e(ft("loading")),L(t).then((function(n){e(function(t,e){return{type:$,tasks:t,todoListId:e}}(n.data.items,t)),e(ft("succeeded"))}))}},it=function(t,e){return function(n){n(ft("loading")),n(et(t,e,"loading")),N(t,e).then((function(i){n({type:J,todolistID:t,id:e}),n(ft("succeeded")),n(et(t,e,"succeeded"))}))}},at=function(t,e){return function(n){n(ft("loading")),_(t,e).then((function(t){var e;0===t.data.resultCode?(n((e=t.data.data.item,{type:Y,task:e})),n(ft("succeeded"))):G(t,n)})).catch((function(t){M(t,n)}))}},ct=function(t,e,n){return function(i,a){var c=a().tasks[t].find((function(t){return t.id===e}));if(c){var o=Object(I.a)({deadline:c.deadline,description:c.description,priority:c.priority,startDate:c.startDate,title:c.title,status:c.status},n);i(ft("loading")),i(et(t,e,"loading")),P(t,e,o).then((function(n){if(0===n.data.resultCode){var a=n.data.data.item;i(function(t,e,n){return{type:Q,todolistID:t,taskID:e,model:n}}(t,e,a)),i(ft("succeeded")),i(et(t,e,"succeeded"))}else G(n,i)})).catch((function(t){M(t,i)}))}}},ot=function(){return function(t){t(ft("loading")),C().then((function(e){var n;return t((n=e.data,{type:Z,todoLists:n})),t(ft("succeeded")),e.data})).then((function(e){e.forEach((function(e){t(nt(e.id))}))})).catch((function(e){M(e,t)}))}},rt=function(t){return function(e){e({type:q,id:t,entityStatus:"loading"}),e(ft("loading")),A(t).then((function(){e(function(t){return{type:H,todolistID:t}}(t)),e(ft("succeeded"))})).catch((function(t){M(t,e)}))}},st=function(t){return function(e){e(ft("loading")),k(t).then((function(t){var n;e((n=t.data.data.item,{type:F,todolist:n})),e(ft("succeeded"))})).catch((function(t){M(t,e)}))}},lt=function(t,e){return function(n){n(ft("loading")),w(e,t).then((function(){n(function(t,e){return{type:K,payload:{id:t,title:e}}}(t,e)),n(ft("succeeded"))})).catch((function(t){M(t,n)}))}},dt={isLoggedIn:!1},ut=function(t){return{type:"login/SET-IS-LOGGED-IN",value:t}},jt=function(){return function(t){t(ft("loading")),z().then((function(e){0===e.data.resultCode?(t(ut(!1)),t({type:V}),t(ft("succeeded"))):G(e,t)})).catch((function(e){M(e,t)}))}},bt={isInitialized:!1,status:"idle",error:null},ft=function(t){return{type:"APP/SET_STATUS",status:t}},Ot=function(t){return{type:"APP/SET_ERROR",error:t}},ht=n(2),mt=o.a.forwardRef((function(t,e){return Object(ht.jsx)(y.a,Object(I.a)({elevation:6,ref:e,variant:"filled"},t))})),pt=function(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.app.error})),n=function(e,n){"clickaway"!==n&&t(Ot(null))};return Object(ht.jsx)(S.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:null!==e,autoHideDuration:6e3,onClose:n,children:Object(ht.jsx)(mt,{onClose:n,severity:"error",children:e})})},gt=n(297),xt=n(290),vt=n(293),It=n(294),yt=n(299),St=n(271),Dt=n(296),Et=n(286),Tt=n(139),Ct=function(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.auth.isLoggedIn})),n=Object(Tt.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="e-mail required",t.password?t.password.length<2&&(e.password="password required min 2 symbols"):e.password="password required",e},onSubmit:function(e){var i;t((i=e,function(t){t(ft("loading")),R(i).then((function(e){0===e.data.resultCode?(t(ut(!0)),t(ft("succeeded"))):G(e,t)})).catch((function(e){M(e,t)}))})),n.resetForm()}});return e?Object(ht.jsx)(v.a,{to:"/"}):Object(ht.jsx)(Dt.a,{container:!0,justifyContent:"center",children:Object(ht.jsx)(Dt.a,{item:!0,justifyContent:"center",children:Object(ht.jsx)("form",{onSubmit:n.handleSubmit,children:Object(ht.jsxs)(vt.a,{children:[Object(ht.jsxs)(St.a,{children:[Object(ht.jsxs)("p",{children:["To log in get registered",Object(ht.jsxs)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",rel:"noreferrer",children:[" ","here"]})]}),Object(ht.jsx)("p",{children:"or use common test account credentials:"}),Object(ht.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(ht.jsx)("p",{children:"Password: free"})]}),Object(ht.jsxs)(yt.a,{children:[Object(ht.jsx)(Et.a,Object(I.a)(Object(I.a)({},n.getFieldProps("email")),{},{onBlur:n.handleBlur,label:"Email",margin:"normal",error:!!n.errors.email&&n.touched.email,helperText:!!n.errors.email&&n.touched.email&&n.errors.email})),Object(ht.jsx)(Et.a,Object(I.a)(Object(I.a)({},n.getFieldProps("password")),{},{onBlur:n.handleBlur,type:"password",label:"Password",margin:"normal",error:!!n.errors.password&&n.touched.password,helperText:!!n.errors.password&&n.touched.password&&n.errors.password})),Object(ht.jsx)(It.a,{label:"Remember me",control:Object(ht.jsx)(xt.a,{name:"rememberMe",onChange:n.handleChange,value:n.values.rememberMe})}),Object(ht.jsx)(gt.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})]})})})})},kt=n(281),wt=n(204),At=n(16),Lt=n(287),_t=n(277),Pt=o.a.memo((function(t){var e=t.addItem,n=t.disabled,i=void 0!==n&&n,a=Object(c.useState)(""),o=Object(At.a)(a,2),r=o[0],s=o[1],l=Object(c.useState)(null),d=Object(At.a)(l,2),u=d[0],j=d[1],b=function(){""!==r.trim()?(e(r.trim()),s("")):j("Title is required")};return Object(ht.jsxs)("div",{children:[Object(ht.jsx)(Lt.a,{value:r,error:!!u,helperText:u,label:"Title",variant:"outlined",onChange:function(t){s(t.currentTarget.value)},onKeyPress:function(t){null!==u&&j(null),"Enter"===t.key&&(b(),s(""))},size:"small",disabled:i}),Object(ht.jsx)(O.a,{color:"primary",onClick:b,disabled:i,children:Object(ht.jsx)(_t.a,{})})]})})),Nt=n(141),Rt=n(279),zt=o.a.memo((function(t){var e=t.title,n=t.onChange,i=t.disabled,a=void 0!==i&&i,o=Object(c.useState)(!1),r=Object(At.a)(o,2),s=r[0],l=r[1],d=Object(c.useState)(e||""),u=Object(At.a)(d,2),j=u[0],b=u[1];return s?Object(ht.jsx)(Lt.a,{value:j,id:"outlined-basic",label:"Change task title",variant:"outlined",autoFocus:!0,onChange:function(t){b(t.currentTarget.value)},onBlur:function(){n(e),l(!1)},size:"small"}):Object(ht.jsx)(m.a,{onDoubleClick:function(){a||l(!0)},variant:"h6",component:"span",children:e})})),Bt=n(292),Gt=o.a.memo((function(t){var e=Object(l.b)(),n=Object(l.c)((function(e){return e.todoLists.find((function(e){return e.id===t.todolistID}))})),a=Object(l.c)((function(e){return e.tasks[t.todolistID].filter((function(e){return e.id===t.tId}))[0]})),o=Object(c.useCallback)((function(n){e(ct(t.todolistID,a.id,{status:n.currentTarget.checked?i.Completed:i.New}))}),[e,t.todolistID,a.id]),r=Object(c.useCallback)((function(n){e(ct(t.todolistID,a.id,{title:n}))}),[e,t.todolistID,a.id]),s=Object(c.useCallback)((function(){e(it(t.todolistID,a.id))}),[e,t.todolistID,a.id]);return Object(ht.jsxs)("div",{className:a.status===i.New?"is-done":"",children:[Object(ht.jsx)(Bt.a,{disabled:"loading"===a.tsEntityStatus||"loading"===n.tlEntityStatus,onChange:o,checked:a.status===i.Completed,color:"primary"}),Object(ht.jsx)(zt,{title:a.title,onChange:r,disabled:"loading"===a.tsEntityStatus||"loading"===n.tlEntityStatus}),Object(ht.jsx)(O.a,{onClick:s,"aria-label":"delete task",color:"default",disabled:"loading"===a.tsEntityStatus||"loading"===n.tlEntityStatus,children:Object(ht.jsx)(Rt.a,{})})]})})),Mt=["demo"],Ut=o.a.memo((function(t){t.demo;var e=Object(Nt.a)(t,Mt),n=Object(l.b)(),a=Object(l.c)((function(t){return t.todoLists.find((function(t){return t.id===e.todolistID}))})),o=Object(l.c)((function(t){return t.tasks[e.todolistID]})),r=o;"active"===a.filter&&(r=o.filter((function(t){return t.status===i.New}))),"completed"===a.filter&&(r=o.filter((function(t){return t.status===i.Completed})));var s=Object(c.useCallback)((function(t){var i;n((i=e.todolistID,{type:W,payload:{id:i,filter:t}}))}),[n,e.todolistID]),d=Object(c.useCallback)((function(t){n(lt(e.todolistID,t))}),[n,e.todolistID]),u=Object(c.useCallback)((function(){n(rt(e.todolistID))}),[n,e.todolistID]),j=Object(c.useCallback)((function(t){n(at(t,e.todolistID))}),[n,e.todolistID]);return Object(ht.jsxs)("div",{children:[Object(ht.jsxs)(m.a,{variant:"h2",component:"span",children:[Object(ht.jsx)(zt,{title:a.title,onChange:d,disabled:"loading"===a.tlEntityStatus}),Object(ht.jsx)(O.a,{color:"default","aria-label":"delete Todolist",onClick:u,disabled:"loading"===a.tlEntityStatus,children:Object(ht.jsx)(Rt.a,{})})]}),Object(ht.jsx)(Pt,{addItem:j,disabled:"loading"===a.tlEntityStatus}),Object(ht.jsx)("div",{children:r.map((function(t){return Object(ht.jsx)(Gt,{tId:t.id,todolistID:e.todolistID},t.id)}))}),Object(ht.jsxs)("div",{children:[Object(ht.jsx)(f.a,{size:"small",variant:"all"===e.filter?"outlined":"text",color:"default",onClick:function(){return s("all")},children:"All"}),Object(ht.jsx)(f.a,{size:"small",variant:"active"===e.filter?"outlined":"text",color:"primary",onClick:function(){return s("active")},children:"Active"}),Object(ht.jsx)(f.a,{size:"small",variant:"completed"===e.filter?"outlined":"text",color:"secondary",onClick:function(){return s("completed")},children:"Completed"})]})]})})),Ft=function(t){var e=t.demo,n=void 0!==e&&e,i=Object(l.b)(),a=Object(l.c)((function(t){return t.todoLists})),o=Object(l.c)((function(t){return t.auth.isLoggedIn}));Object(c.useEffect)((function(){!n&&o&&i(ot())}),[i,n,o]);var r=Object(c.useCallback)((function(t){i(st(t))}),[i]);return o?Object(ht.jsxs)(ht.Fragment,{children:[Object(ht.jsx)(kt.a,{container:!0,style:{padding:10,marginBottom:30,display:"flex",justifyContent:"center"},children:Object(ht.jsx)(Pt,{addItem:r})}),Object(ht.jsx)(kt.a,{container:!0,spacing:2,children:a.map((function(t){return Object(ht.jsx)(kt.a,{item:!0,xs:3,children:Object(ht.jsx)(wt.a,{elevation:3,style:{padding:10,display:"flex",justifyContent:"center",minWidth:150,maxWidth:300},children:Object(ht.jsx)(Ut,{todolistID:t.id,filter:t.filter,demo:n})})},t.id)}))})]}):Object(ht.jsx)(v.a,{to:"/login"})},Ht=o.a.memo((function(t){var e=t.demo,n=void 0!==e&&e,i=Object(l.c)((function(t){return t.app.status})),a=Object(l.c)((function(t){return t.app.isInitialized})),o=Object(l.c)((function(t){return t.auth.isLoggedIn})),r=Object(l.b)();if(Object(c.useEffect)((function(){r((function(t){B().then((function(e){0===e.data.resultCode?t(ut(!0)):G(e,t)})).catch((function(e){M(e,t)})).finally((function(){t({type:"APP/SET_IS_INITIALIZED",value:!0})}))}))}),[r]),!a)return Object(ht.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(ht.jsx)(x.a,{})});return Object(ht.jsx)("div",{children:Object(ht.jsxs)(u.a,{maxWidth:"xl",children:[Object(ht.jsx)(pt,{}),Object(ht.jsxs)(b.a,{position:"static",style:{marginBottom:30},children:[Object(ht.jsxs)(h.a,{style:{display:"flex",justifyContent:"space-between"},children:[Object(ht.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(ht.jsx)(O.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(ht.jsx)(g.a,{})}),Object(ht.jsx)(m.a,{variant:"h6",children:"My Todolist Project"})]}),Object(ht.jsx)(f.a,{color:"inherit",onClick:function(){r(jt())},disabled:!o,children:"Log out"})]}),Object(ht.jsx)("div",{className:"linearProgress",children:"loading"===i&&Object(ht.jsx)(j.a,{})})]}),Object(ht.jsxs)(v.d,{children:[Object(ht.jsx)(v.b,{path:"/",element:Object(ht.jsx)(Ft,{demo:n})}),Object(ht.jsx)(v.b,{path:"login",element:Object(ht.jsx)(Ct,{})}),Object(ht.jsx)(v.b,{path:"*",element:Object(ht.jsx)("h1",{children:"404: PAGE NOT FOUND"})})]})]})})})),Kt=n(140),Wt=n(41),Zt=n(138),qt=n.n(Zt),Vt=n(83),Yt=Object(Wt.b)({todoLists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Z:return e.todoLists.map((function(t){return Object(I.a)(Object(I.a)({},t),{},{filter:"all",tlEntityStatus:"idle"})}));case F:return[Object(I.a)(Object(I.a)({},e.todolist),{},{filter:"all",tlEntityStatus:"idle"})].concat(Object(U.a)(t));case H:return t.filter((function(t){return t.id!==e.todolistID}));case K:case W:return t.map((function(t){return t.id===e.payload.id?Object(I.a)(Object(I.a)({},t),e.payload):t}));case q:return t.map((function(t){return t.id===e.id?Object(I.a)(Object(I.a)({},t),{},{tlEntityStatus:e.entityStatus}):t}));case V:return[];default:return t}},tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case X:return Object(I.a)(Object(I.a)({},t),{},Object(tt.a)({},e.todolistID,t[e.todolistID].map((function(t){return t.id===e.taskID?Object(I.a)(Object(I.a)({},t),{},{tsEntityStatus:e.entityStatus}):t}))));case Z:return e.todoLists.reduce((function(t,e){return Object(I.a)(Object(I.a)({},t),{},Object(tt.a)({},e.id,[]))}),Object(I.a)({},t));case $:return Object(I.a)(Object(I.a)({},t),{},Object(tt.a)({},e.todoListId,e.tasks.map((function(t){return Object(I.a)(Object(I.a)({},t),{},{tsEntityStatus:"idle"})}))));case Y:return Object(I.a)(Object(I.a)({},t),{},Object(tt.a)({},e.task.todoListId,[Object(I.a)(Object(I.a)({},e.task),{},{tsEntityStatus:"idle"})].concat(Object(U.a)(t[e.task.todoListId]))));case F:return Object(I.a)(Object(I.a)({},t),{},Object(tt.a)({},e.todolist.id,[]));case H:var n=Object(I.a)({},t);return delete n[e.todolistID],n;case J:return Object(I.a)(Object(I.a)({},t),{},Object(tt.a)({},e.todolistID,t[e.todolistID].filter((function(t){return t.id!==e.id}))));case Q:return Object(I.a)(Object(I.a)({},t),{},Object(tt.a)({},e.todolistID,t[e.todolistID].map((function(t){return t.id===e.taskID?Object(I.a)(Object(I.a)({},t),e.model):t}))));case V:return{};default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET_IS_INITIALIZED":return Object(I.a)(Object(I.a)({},t),{},{isInitialized:e.value});case"APP/SET_STATUS":return Object(I.a)(Object(I.a)({},t),{},{status:e.status});case"APP/SET_ERROR":return Object(I.a)(Object(I.a)({},t),{},{error:e.error});default:return Object(I.a)({},t)}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,e=arguments.length>1?arguments[1]:void 0;return"login/SET-IS-LOGGED-IN"===e.type?Object(I.a)(Object(I.a)({},t),{},{isLoggedIn:e.value}):t}}),Jt=(l.c,Object(Kt.a)({reducer:Yt,middleware:function(t){return t().prepend(Vt.a).concat(qt.a)}}));window.store=Jt;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(ht.jsx)(l.a,{store:Jt,children:Object(ht.jsx)(d.a,{children:Object(ht.jsx)(Ht,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[198,1,2]]]);
//# sourceMappingURL=main.865b463d.chunk.js.map